<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Pavan Kalyan's Blog | Setting up a 24/7 torrent machine using your Raspberry Pi</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta property="og:title" content="Setting up a 24/7 torrent machine using your Raspberry Pi">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://pavan-kalyan.dev/posts/setting-up-an-always-on-torrent-machine-using-your-raspberry-pi">
	<meta property="og:description" content="">
	<meta property="og:site_name" content="Pavan Kalyan's Blog">

	<meta name="twitter:card" content="summary">
	<meta name="twitter:url" content="https://pavan-kalyan.dev/posts/setting-up-an-always-on-torrent-machine-using-your-raspberry-pi">
	<meta name="twitter:title" content="Setting up a 24/7 torrent machine using your Raspberry Pi">
	<meta name="twitter:description" content="">

	
	<meta property="og:image" content="https://pavan-kalyan.dev/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
	<meta name="twitter:image" content="https://pavan-kalyan.dev/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
	

	<link href="https://pavan-kalyan.dev/feed.xml" type="application/rss+xml" rel="alternate" title="Pavan Kalyan's Blog Last 10 blog posts" />

	
	<link rel="stylesheet" type="text/css" href="/assets/fonts-d3e0f161d4de5765d4bcd9df3bfa83599d907ee9667d5148371c2af24f725559.css">
	

	

	
	<link rel="stylesheet" type="text/css" title="light" id="light" href="/assets/light-ebe4700bfdbf6a2473d76231d2f0dc5b8e8a3ca56a2bc42baa20641c1ef8ede5.css">
	<link rel="stylesheet" type="text/css" title="dark" id="dark" href="/assets/dark-28a53529149b36ea483bc030c7284596de2cedbca4690407eb0fc3262a5d5ebb.css" disabled="true">
	

	
	<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4"></script>
	<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>


	<!-- Goat Counter - webpage counter -->
	<script data-goatcounter="https://pavan-kalyan.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
	 <!-- /Goat Counter -->

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav ">
  <a href="/" class="header-logo" title="Pavan Kalyan's Blog">Pavan Kalyan's Blog</a>
  <ul class="header-links">
    
    
    
      <li>
        <a href="https://medium.com/@damalapati.pavan" rel="noreferrer noopener" target="_blank" title="Medium">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-medium">
  <use href="/assets/medium-c490b76e2e7329f77cc2df18acc17452868ea861ed0e1ecf621c9777877068f5.svg#icon-medium" xlink:href="/assets/medium-c490b76e2e7329f77cc2df18acc17452868ea861ed0e1ecf621c9777877068f5.svg#icon-medium"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://github.com/pavan-kalyan" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://stackoverflow.com/users/7470050" rel="noreferrer noopener" target="_blank" title="Stack Overflow">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-stackoverflow">
  <use href="/assets/stackoverflow-12ba59133ed134d26156d30f095e0222b6039395cf26f2fab0cb6ce3ef2db00d.svg#icon-stackoverflow" xlink:href="/assets/stackoverflow-12ba59133ed134d26156d30f095e0222b6039395cf26f2fab0cb6ce3ef2db00d.svg#icon-stackoverflow"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/pavan-kalyan-damalapati" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="mailto:damalapati.pavan@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email" xlink:href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a onclick="toggle()" title="Toggle Theme">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-theme">
  <use href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme" xlink:href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme"></use>
</svg>

        </a>
      </li>
    
  </ul>

<nav>
  <ul class="header-sub ">
    
      <li><a href="/">Blog</a></li>
    
    
      <li>
        <a href="/about/" title="About me">About</a>
      </li>
    
    <li><a href="/research/">Research</a></li>
    <li><a href="/projects/">Projects</a></li>
    <li><a href="/publications/">Publications</a></li>
	<li><a href="/search/">Search <svg xmlns="http://www.w3.org/2000/svg" class="icon-search" width="16px" height="16px" viewBox="0 -15 60 60">
  <use href="/assets/search-9b1695702dbef55e657e06d698cfb2a10bd329e1e4b5827a8faeba06db0de0a9.svg#icon-search" xlink:href="/assets/search-9b1695702dbef55e657e06d698cfb2a10bd329e1e4b5827a8faeba06db0de0a9.svg#icon-search"></use>
</svg>
</a></li>
  </ul>
</nav>

</nav>




        <article class="article ">
          <header class="article-header">
            <h1>Setting up a 24/7 torrent machine using your Raspberry Pi</h1>
            <p></p>
            <div class="article-list-footer">
  <span class="article-list-date">
    March 10, 2020
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      5 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
      
      <a href="/tag/rpi" title="See all posts with tag 'rpi'">rpi</a>
    
      
      <a href="/tag/linux" title="See all posts with tag 'linux'">linux</a>
    
      
      <a href="/tag/shell" title="See all posts with tag ''"></a>
    
  </div>
</div>
          </header>

          <div class="article-content">
            <p>This is a step-by-step guide to setup an always on torrent machine.</p>

<h3 id="why-would-you-want-a-dedicated-torrent-machine">Why would you want a dedicated torrent machine?:</h3>
<ul>
  <li>Large torrent downloads take time, and it isn’t cheap or feasible to have a loud and power hungry machine running all night to download data. This can lead to higher electricity bills.</li>
  <li>Usually after downloading data, It ends up in a external HDD anyways. This would require extra copying.</li>
  <li>You can’t download files on your laptop on any network, for various security and privacy reasons. So you have to wait until you get home before you start downloading a new torrent.</li>
</ul>

<p>This is where the Raspberry Pi is useful, It is a cheap and silent machine which takes very little power to run. It allows the data in the HDD to be streamed over the local network to any device on your home network. This should reduce the number of wires and unnecessary copying. Finally, If configured properly you can initiate a torrent download on your RPI from anywhere in the world and come home to the data you want instead of more waiting, this won’t be covered in detail in this post.</p>

<p>Although this guide would work on any Debian based Linux system, it makes a lot more sense on a cheap and low power machine like a Raspberry Pi.</p>

<h3 id="what-you-need">What you need:</h3>
<ul>
  <li>Raspberry Pi with terminal access either ssh or monitor and keyboard</li>
  <li>External HDD or USB</li>
</ul>

<h3 id="step-1-setup-deluge-with-thinclient-and-webui">Step 1: Setup Deluge with Thinclient and WebUI</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get upgrade
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>deluged python3-mako deluge-web deluge-console
</code></pre></div></div>
<p>Run the following to setup the default config files, which we will modify soon.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deluged
</code></pre></div></div>
<p>Back up the default config and edit the config file with your favourite editor, I use <code class="highlighter-rouge">vim</code>, you can use <code class="highlighter-rouge">nano</code>.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> ~/.config/deluge/auth ~/.config/deluge/auth.old
vim ~/.config/deluge/auth
</code></pre></div></div>
<p>Here you can specify the username and password used for deluge-console
It should be of the form <code class="highlighter-rouge">username:password:level</code>
For me this is <code class="highlighter-rouge">pi:raspberry:10</code></p>

<p>Restart deluged to use the new config and open up deluge-console by running the following:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pkill deluged
deluged
deluge-console
</code></pre></div></div>
<p>Insert the following into the prompt of deluge-console.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config <span class="nt">-s</span> allow_remote True 
<span class="nb">exit</span>
</code></pre></div></div>
<p>This allows remote connections to your deluge daemon.
Restart the deluge daemon one last time.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pkill deluged
deluged
</code></pre></div></div>
<p>You have now setup deluge and the thinclient. Next we will setup deluge webUI, a lightweight and convenient way to access your torrents.
To start the WebUI run:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deluge-web
</code></pre></div></div>
<p>Open your browser and navigate to http://localhost:8112 on the RPI or <url of="" RPI="">:8112 from any other device on the same network.
you should be seeing a UI similar to the one below.</url></p>

<p><a href="/assets/deluge-webui-e6b59a6eb0d3949954c195e36a9b1cb587263c7c8f67c733777319726bb07de7.png">
  <img src="/assets/deluge-webui-e6b59a6eb0d3949954c195e36a9b1cb587263c7c8f67c733777319726bb07de7.png" alt="Deluge WebUI image" class="zooming" data-rjs="/assets/deluge-webui-e6b59a6eb0d3949954c195e36a9b1cb587263c7c8f67c733777319726bb07de7.png" data-zooming-width="2870" data-zooming-height="732" />
</a></p>

<p>You will be prompted with a connection manager. Choose the connection and click connect.
You will then be prompted for a password
The default password is <code class="highlighter-rouge">deluge</code>
It is highly recommended that you change the password in the settings available in the WebUI.</p>

<p>The advantage of using the WebUI is that you can access it from any browser on any device. 
but you can also use a thinclient, for e.g, I use <a href="https://f-droid.org/packages/org.deluge.trireme/">trireme</a></p>

<p><strong>Note</strong>: When setting up deluge auto start, it’s important to set the right access level or deluge will not be able to access the external hard disk.</p>

<p><strong>TODO</strong>: instructions to set up permissions via systemd.</p>

<h4 id="setup-trireme-on-android-optional">Setup trireme on Android (Optional)</h4>
<ol>
  <li>Install it from <a href="https://f-droid.org/packages/org.deluge.trireme/">here</a> or from <a href="https://github.com/teal77/trireme/releases">GitHub</a></li>
  <li>In the host field, enter the ip address of the rpi. The host field should already be filled in with <code class="highlighter-rouge">58846</code> as the default port no. (if you didn’t change it). Click on continue.</li>
  <li>The ‘save certifcate’ toggle should be off by default.</li>
  <li>Next, we come to the username and password fields, this should be filled with the username and password you set in <code class="highlighter-rouge">~/.config/deluge/auth</code>. For me this is <code class="highlighter-rouge">pi</code> and <code class="highlighter-rouge">raspberry</code>.</li>
  <li>That’s it! You should now be seeing your torrents and their status. Keep in mind that this only works when you’re on the same network. There is a way to make this work across the internet but that’s for another time.</li>
</ol>

<h3 id="step-2-configure-and-setup-the-hard-disk">Step 2. Configure and setup the hard disk</h3>

<ol>
  <li>Create the directory to store the downloads from deluge.
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir</span> /media/pi/usbhdd
</code></pre></div>    </div>
  </li>
  <li>Connect your hard disk to the Raspberry Pi.</li>
  <li>Run
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>fdisk <span class="nt">-l</span>
</code></pre></div>    </div>
    <p>This will return the list of drives. Identify your USB or HDD using the size and the filesystem specified. Make note of the path under the <code class="highlighter-rouge">Device</code>. It is usually in the form of <code class="highlighter-rouge">/dev/sda</code>, <code class="highlighter-rouge">/dev/sdb</code>, etc. In my case, it’s /dev/sda5</p>
  </li>
  <li>Run the following after replacing it with the path noted above.
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>lsblk <span class="nt">-l</span> /dev/sda5
</code></pre></div>    </div>
    <p>Copy the UUID info. This will be used by the system to mount the correct USB to the right directory regardless of any other USBs that might be connected.</p>
  </li>
  <li>Open <code class="highlighter-rouge">/etc/fstab</code> with your favourite editor in <code class="highlighter-rouge">sudo</code> mode.
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /etc/fstab
</code></pre></div>    </div>
    <p>Add the following to the bottom of the file.</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">UUID</span><span class="o">=</span>&lt;UUID of the HDD or USB&gt; &lt;/path/to/mount/dir&gt; &lt;filesystem&gt; defaults,nofail 0 0 
</code></pre></div>    </div>
    <p>It should look something like this</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">UUID</span><span class="o">=</span>db6882b8-8bb3-4c2f-9af7-e5e431bee600 /media/pi/usbhdd auto defaults,nofail 0 0
</code></pre></div>    </div>
    <p>The <code class="highlighter-rouge">nofail</code> tells the system not to fail the entire bootup process if it can’t find the corresponding external disk.
Save the file and close it.</p>
  </li>
  <li>Reboot the system and hope everything works out. If the system fails to boot It’s probably related to the <code class="highlighter-rouge">/etc/fstab</code> file. In which case you can load the SD card of the RPI on another system and manually edit the <code class="highlighter-rouge">/etc/fstab</code> back to how it was.</li>
  <li>After a successful reboot open up Deluge WebUI and change the settings for the download location to the new mount dir made. In my case, it’s <code class="highlighter-rouge">/media/pi/usbhdd</code>.</li>
</ol>

<p>That’s it. You now have a 24/7 torrent machine always downloading data in the background at a very low power cost.
Next, you should set up a VPN, so that your torrent downloads can not be tracked by your ISP or any other entity.
You should also try <a href="https://www.dataplicity.com/">Dataplicity</a> which is what I use to access my RPI (and torrent client) from anywhere in the world with an internet connection.</p>


          </div>
	  <!--
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Setting+up+a+24/7+torrent+machine+using+your+Raspberry+Pi%20-%20https://pavan-kalyan.dev/posts/setting-up-an-always-on-torrent-machine-using-your-raspberry-pi" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://pavan-kalyan.dev/posts/setting-up-an-always-on-torrent-machine-using-your-raspberry-pi" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
          </div>

	  -->
          
        </article>
        <footer class="footer ">
  <p>
  This is a technical blog, where I write about various things I learn or want to share.
  <br>
    <a href="/about" title="About me">Pavan Kalyan Damalapati</a>
</footer>

      </div>
    </div>
  </main>
  

<script type="text/javascript" src="/assets/vendor-3ee2c63bbac916f96cd7f90e83ab767f058ead1301444c9966f5156911c8be7f.js"></script>





<script type="text/javascript" src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js"></script>


  <script type="text/javascript" src="/assets/themetoggle-df0d3d73164dc26dffbd630182ae4d0dfa7bee6b694a2b5d565d73595b582bbf.js"></script>

</body>
</html>
